<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F@J</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>☁️</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #fafafa;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 60px 20px;
        }

        header {
            text-align: center;
            margin-bottom: 80px;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 16px;
            color: #1a1a1a;
        }

        .subtitle {
            font-size: 1.2rem;
            color: #666;
            font-weight: 300;
        }

        .social-links {
            margin-top: 24px;
        }

        .social-links a {
            display: inline-block;
            margin: 0 12px;
            color: #666;
            text-decoration: none;
            transition: color 0.2s;
        }

        .social-links a:hover {
            color: #1a1a1a;
        }

        .social-links svg {
            width: 24px;
            height: 24px;
            vertical-align: middle;
        }

        .projects {
            margin: 60px 0;
        }

        .projects h2 {
            font-size: 1.8rem;
            margin-bottom: 32px;
            color: #1a1a1a;
        }

        .project-card {
            background: white;
            border-radius: 8px;
            padding: 32px;
            margin-bottom: 24px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
            transition: transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            display: block;
            color: inherit;
        }

        .project-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.12);
        }

        .project-card h3 {
            font-size: 1.5rem;
            margin-bottom: 12px;
            color: #1a1a1a;
        }

        .project-card p {
            color: #666;
            line-height: 1.7;
        }

        .project-card .tag {
            display: inline-block;
            background: #f0f0f0;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 0.85rem;
            color: #666;
            margin-top: 12px;
            margin-right: 8px;
        }

        footer {
            margin-top: 120px;
            padding-top: 32px;
            border-top: 1px solid #e5e5e5;
            text-align: center;
            font-size: 0.9rem;
            color: #999;
        }

        footer a {
            color: #666;
            text-decoration: none;
        }

        footer a:hover {
            color: #333;
        }

        .icp {
            margin-top: 8px;
            font-size: 0.85rem;
        }

        /* Factor Game */
        .factor-game {
            margin: 50px 0 70px;
        }

        .factor-game-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            font-size: 0.9rem;
            color: #999;
        }

        .factor-game-score {
            font-weight: 600;
            color: #0066cc;
        }

        .factor-game-best {
            font-weight: 600;
            color: #999;
        }

        .factor-game-canvas {
            position: relative;
            height: 100px;
            overflow: hidden;
            margin-bottom: 30px;
        }

        .factor-game-canvas::before,
        .factor-game-canvas::after {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            width: 80px;
            pointer-events: none;
            z-index: 2;
        }

        .factor-game-canvas::before {
            left: 0;
            background: linear-gradient(to right, #fafafa, transparent);
        }

        .factor-game-canvas::after {
            right: 0;
            background: linear-gradient(to left, #fafafa, transparent);
        }

        .factor-game-track {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translateY(-50%);
            display: flex;
            align-items: center;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .factor-game-node {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            font-weight: 500;
            color: #666;
            background: white;
            border: 2px solid #e5e5e5;
            flex-shrink: 0;
        }

        .factor-game-node.current {
            border-color: #0066cc;
            color: #0066cc;
            font-weight: 600;
        }

        .factor-game-node.appear {
            animation: nodeAppear 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes nodeAppear {
            from {
                transform: scale(0);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .factor-game-connector {
            position: relative;
            width: 60px;
            height: 2px;
            flex-shrink: 0;
            margin: 0 12px;
        }

        .factor-game-line {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 100%;
            transform-origin: left;
        }

        .factor-game-line.add {
            background: #22c55e;
        }

        .factor-game-line.sub {
            background: #ef4444;
        }

        .factor-game-line.extend {
            animation: lineExtend 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes lineExtend {
            from { transform: scaleX(0); }
            to { transform: scaleX(1); }
        }

        .factor-game-label {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.7rem;
            color: #999;
            white-space: nowrap;
        }

        .factor-game-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .factor-game-btn {
            min-width: 60px;
            padding: 10px 18px;
            background: #fafafa;
            border: 1px solid #e5e5e5;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 500;
            color: #333;
            transition: all 0.15s;
        }

        .factor-game-btn:hover:not(:disabled) {
            background: #f0f0f0;
            border-color: #ccc;
        }

        .factor-game-btn:disabled {
            opacity: 0.2;
            cursor: not-allowed;
        }

        .factor-game-reset {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: white;
            border: 1px solid #ddd;
            cursor: pointer;
            font-size: 1.2rem;
            color: #666;
            display: none;
            align-items: center;
            justify-content: center;
            transition: all 0.15s;
            z-index: 3;
        }

        .factor-game-reset.show {
            display: flex;
        }

        .factor-game-reset:hover {
            border-color: #999;
            color: #333;
            transform: translateY(-50%) scale(1.1);
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 2rem;
            }

            .subtitle {
                font-size: 1rem;
            }

            .projects h2 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>F2J</h1>
            <p class="subtitle">Builder & Writer</p>
            <div class="social-links">
                <a href="https://github.com/shuxueshuxue" target="_blank" rel="noopener noreferrer" title="GitHub">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                </a>
            </div>
        </header>

        <div class="factor-game">
            <div class="factor-game-info">
                <div>Score: <span class="factor-game-score" id="score">1.00</span></div>
                <div class="factor-game-best">Best: <span id="best">-</span></div>
            </div>
            <div class="factor-game-canvas">
                <div class="factor-game-track" id="track"></div>
                <button class="factor-game-reset" id="resetBtn" onclick="game.reset()">↻</button>
            </div>
            <div class="factor-game-buttons" id="buttons"></div>
        </div>

        <section class="projects">
            <h2>Projects</h2>

            <a href="https://lexicalmathical.com/ink-and-memory" class="project-card">
                <h3>Ink & Memory</h3>
                <p>
                    A Disco Elysium-inspired writing interface where your thoughts manifest as distinct inner voices.
                    Each voice comments on your writing with its own personality, creating an interactive dialogue
                    between you and your cognitive skills.
                </p>
                <span class="tag">React</span>
                <span class="tag">AI</span>
                <span class="tag">Writing Tool</span>
            </a>

            <!-- Add more projects here as cards -->
        </section>

        <footer>
        </footer>
    </div>

    <script>
        const game = {
            path: [],
            startNum: 0,
            usedFactors: new Set(),
            nodeElements: [],
            bestScore: localStorage.getItem('factorGameBest') || null,

            init(num) {
                this.startNum = num;
                this.path = [num];
                this.usedFactors.clear();
                this.nodeElements = [];

                const track = document.getElementById('track');
                track.innerHTML = '';

                // @@@ Incremental - Create first node only
                const node = this.createNode(num, true);
                track.appendChild(node);
                this.nodeElements.push(node);

                this.centerTrack();
                this.updateScore();
                this.updateButtons();
            },

            createNode(num, isCurrent) {
                const node = document.createElement('div');
                node.className = 'factor-game-node' + (isCurrent ? ' current appear' : '');
                node.textContent = num;
                return node;
            },

            createConnector(factor, op) {
                const connector = document.createElement('div');
                connector.className = 'factor-game-connector';

                const line = document.createElement('div');
                line.className = `factor-game-line ${op} extend`;
                connector.appendChild(line);

                const label = document.createElement('div');
                label.className = 'factor-game-label';
                label.textContent = op === 'add' ? `+${factor}` : `−${factor}`;
                connector.appendChild(label);

                return connector;
            },

            applyOperation(factor, op) {
                const currentNum = this.path[this.path.length - 1];
                const newNum = op === 'add' ? currentNum + factor : currentNum - factor;

                this.usedFactors.add(factor);
                this.path.push(newNum);

                // @@@ Incremental - Only append new elements
                const track = document.getElementById('track');

                // Remove current class from last node
                const lastNode = this.nodeElements[this.nodeElements.length - 1];
                lastNode.classList.remove('current');

                // Append connector
                const connector = this.createConnector(factor, op);
                track.appendChild(connector);

                // Append new node
                const newNode = this.createNode(newNum, true);
                track.appendChild(newNode);
                this.nodeElements.push(newNode);

                // Center the track
                this.centerTrack();

                this.updateScore();
                this.updateButtons();
            },

            centerTrack() {
                // @@@ Position track so current (last) node stays centered
                const nodeWidth = 48;
                const connectorWidth = 84; // 60px + 12px margins
                const offset = -(this.path.length - 1) * (nodeWidth + connectorWidth);

                const track = document.getElementById('track');
                track.style.transform = `translate(${offset}px, -50%)`;
            },

            updateScore() {
                const currentNum = this.path[this.path.length - 1];
                const score = (currentNum / this.startNum).toFixed(5);
                document.getElementById('score').textContent = score;

                // Update best
                if (!this.bestScore || parseFloat(score) > parseFloat(this.bestScore)) {
                    this.bestScore = score;
                    localStorage.setItem('factorGameBest', score);
                }
                document.getElementById('best').textContent = this.bestScore || '-';
            },

            updateButtons() {
                const currentNum = this.path[this.path.length - 1];
                const factors = this.getPrimeFactors(currentNum);
                const buttonsDiv = document.getElementById('buttons');
                buttonsDiv.innerHTML = '';

                let hasAvailableMoves = false;

                factors.forEach(factor => {
                    const used = this.usedFactors.has(factor);
                    if (!used) hasAvailableMoves = true;

                    const addBtn = document.createElement('button');
                    addBtn.className = 'factor-game-btn';
                    addBtn.textContent = `+${factor}`;
                    addBtn.disabled = used;
                    addBtn.onclick = () => this.applyOperation(factor, 'add');

                    const subBtn = document.createElement('button');
                    subBtn.className = 'factor-game-btn';
                    subBtn.textContent = `−${factor}`;
                    subBtn.disabled = used;
                    subBtn.onclick = () => this.applyOperation(factor, 'sub');

                    buttonsDiv.appendChild(addBtn);
                    buttonsDiv.appendChild(subBtn);
                });

                // Show reset button if no moves available
                const resetBtn = document.getElementById('resetBtn');
                if (hasAvailableMoves) {
                    resetBtn.classList.remove('show');
                } else {
                    resetBtn.classList.add('show');
                }
            },

            getPrimeFactors(n) {
                const factors = new Set();
                let num = Math.abs(n);

                for (let i = 2; i <= Math.sqrt(num); i++) {
                    while (num % i === 0) {
                        factors.add(i);
                        num /= i;
                    }
                }
                if (num > 1) factors.add(num);
                return Array.from(factors).sort((a, b) => a - b);
            },

            reset() {
                const newNum = Math.floor(Math.random() * 90) + 10;
                this.init(newNum);
            }
        };

        // Start game
        game.init(11);
    </script>
</body>
</html>
